--- server/index.js (original)
+++ server/index.js (fixed)
@@ -154,7 +154,8 @@
 // Health check
 app.get('/health', (req, res) => {
+  const apiUrl = process.env.KOLOSAL_API_URL || 'https://api.kolosal.ai/v1'
   res.json({
     status: 'ok',
     timestamp: new Date().toISOString(),
     kolosalApiKey: process.env.KOLOSAL_API_KEY ? 'configured' : 'missing',
-    kolosalApiUrl: process.env.KOLOSAL_API_URL || 'https://api.kolosal.ai/v1 (default)',
-    mode: process.env.KOLOSAL_API_KEY && process.env.KOLOSAL_API_URL ? 'live' : 'mock',
+    kolosalApiUrl: apiUrl,
+    mode: process.env.KOLOSAL_API_KEY ? 'live' : 'mock',
   })
 })

@@ -238,9 +239,10 @@
     })
 
     // If KOLOSAL_API_KEY is configured, try the live API and fallback to mock on error
-    if (process.env.KOLOSAL_API_KEY && process.env.KOLOSAL_API_URL) {
+    if (process.env.KOLOSAL_API_KEY) {
       try {
-        const baseUrl = process.env.KOLOSAL_API_URL.replace(/\/$/, '')
+        const baseUrl = (process.env.KOLOSAL_API_URL || 'https://api.kolosal.ai/v1').replace(/\/$/, '')
         const url = `${baseUrl}/content/bias-check`
         
         const requestBody = {
@@ -251,6 +253,8 @@
           }
         }
 
+        console.log(`[Kolosal Bias] Calling ${url}`)
+        
         const response = await axios.post(url, requestBody, {
           headers: {
             'Authorization': `Bearer ${process.env.KOLOSAL_API_KEY}`,
@@ -261,13 +265,21 @@
           timeout: 10000,
         })
         
+        console.log(`[Kolosal Bias] Success: ${response.status}`)
+        
         // Extract data from nested response structure
         const apiData = response.data?.data || response.data
         const normalized = normalizeBiasResponse(apiData, campaignId)
         return res.json({ data: normalized, success: true, timestamp: new Date().toISOString() })
       } catch (err) {
         console.warn('Kolosal bias API failed, falling back to mock:', err?.message)
         if (process.env.NODE_ENV !== 'production') {
-          console.error('Full error:', err?.response?.status, err?.response?.data || err?.message)
+          console.error('Full error:', {
+            status: err?.response?.status,
+            statusText: err?.response?.statusText,
+            data: err?.response?.data,
+            url: err?.config?.url
+          })
         }
       }
     }

@@ -304,9 +316,10 @@
 
     // Try live Kolosal if configured, otherwise use mock generator
-    if (process.env.KOLOSAL_API_KEY && process.env.KOLOSAL_API_URL) {
+    if (process.env.KOLOSAL_API_KEY) {
       try {
-        const baseUrl = process.env.KOLOSAL_API_URL.replace(/\/$/, '')
+        const baseUrl = (process.env.KOLOSAL_API_URL || 'https://api.kolosal.ai/v1').replace(/\/$/, '')
         const url = `${baseUrl}/content/generate`
         
         const requestBody = {
@@ -320,6 +333,8 @@
           }
         }
 
+        console.log(`[Kolosal Copy] Calling ${url}`)
+        
         const response = await axios.post(url, requestBody, {
           headers: {
             'Authorization': `Bearer ${process.env.KOLOSAL_API_KEY}`,
@@ -330,13 +345,21 @@
           timeout: 15000,
         })
         
+        console.log(`[Kolosal Copy] Success: ${response.status}`)
+        
         // Extract data from nested response structure
         const apiData = response.data?.data || response.data
         const normalized = normalizeCopyResponse(apiData, campaignId, language, tone)
         return res.json({ data: normalized, success: true, timestamp: new Date().toISOString() })
       } catch (err) {
         console.warn('Kolosal copy API failed, falling back to mock:', err?.message)
         if (process.env.NODE_ENV !== 'production') {
-          console.error('Full error:', err?.response?.status, err?.response?.data || err?.message)
+          console.error('Full error:', {
+            status: err?.response?.status,
+            statusText: err?.response?.statusText,
+            data: err?.response?.data,
+            url: err?.config?.url
+          })
         }
       }
     }

@@ -402,11 +425,12 @@
 
 // Start server
 app.listen(PORT, () => {
-  const isLive = process.env.KOLOSAL_API_KEY && process.env.KOLOSAL_API_URL
+  const apiUrl = process.env.KOLOSAL_API_URL || 'https://api.kolosal.ai/v1'
+  const isLive = !!process.env.KOLOSAL_API_KEY
   console.log(`\nğŸš€ Inclusive Marketing Hub API`)
   console.log(`ğŸ“¡ Server running on http://localhost:${PORT}`)
   console.log(`ğŸ”‘ Kolosal API Key: ${process.env.KOLOSAL_API_KEY ? 'âœ… Configured' : 'âŒ Missing'}`)
-  console.log(`ğŸŒ Kolosal API URL: ${process.env.KOLOSAL_API_URL || 'https://api.kolosal.ai/v1 (default)'}`)
+  console.log(`ğŸŒ Kolosal API URL: ${apiUrl}`)
   console.log(`${isLive ? 'ğŸŸ¢ LIVE' : 'ğŸŸ¡ MOCK'} MODE - ${isLive ? 'Using Kolosal API with fallback' : 'Using mock data only'}`)
   console.log(`ğŸ“Š Mock personas loaded: ${personas.length}`)
   console.log(`\nğŸ“š Available endpoints:`)
